# Requirements for `cfg-iif`

## 1. Core Functionality

The crate shall provide a macro named `cfg_iif!` that allows for conditional compilation based on `#[cfg]` attributes. This macro should be usable as an expression, returning a value, and as a statement for executing code blocks conditionally.

## 2. `no_std` Compatibility

The crate must be compatible with `no_std` environments, ensuring it can be used in projects that do not link against the standard library.

## 3. Macro Forms

The `cfg_iif!` macro must support the following forms:

### 3.1. Standard `#[cfg]` Form

This form should handle both `if-else` and `if` scenarios.

-   **With `else`:**
    ```rust
    cfg_iif!(#[cfg(condition)] { /* true case */ } else { /* false case */ })
    ```
-   **Without `else`:**
    ```rust
    cfg_iif!(#[cfg(condition)] { /* true case */ })
    ```

### 3.2. Shorthand Form

This form provides a more concise syntax for common cases, especially features. It should also handle both `if-else` and `if` scenarios.

-   **With `else`:**
    ```rust
    cfg_iif!(condition { /* true case */ } else { /* false case */ })
    ```
-   **Without `else`:**
    ```rust
    cfg_iif!(condition { /* true case */ })
    ```

## 4. Usage Contexts

The macro must be usable in two primary contexts:

1.  **As an expression:** It should return a value from the executed block, allowing it to be used in assignments.
    ```rust
    let value = cfg_iif!(condition { "true" } else { "false" });
    ```
2.  **As a statement:** It should execute the code within the appropriate block without returning a value.
    ```rust
    cfg_iif!(condition {
        println!("This is the true case.");
    });
    ```

## 5. Rust Version Compatibility

The crate must compile and work correctly with a minimum Rust version of 1.56.1.

## 6. Testing

The implementation must be accompanied by a comprehensive test suite that verifies:
- All supported macro forms (`#[cfg]` and shorthand).
- Both expression and statement-based usage.
- Correct behavior for different `#[cfg]` conditions (e.g., `target_family`, `feature`).
